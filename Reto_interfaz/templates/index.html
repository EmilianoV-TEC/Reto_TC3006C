<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='styles/main_style.css') }}" />
    <style>
        /* Agrega estilos para la selección en el dropdown */
        .dropdown-content a.clicked {
            background-color: #3498db;
            color: white;
        }
    </style>
    <title>Image Classification</title>
</head>
<body>
<div class="container">
    <h1 class="jumbotron">STORE SALES FORECASTING</h1>

    <form method="POST" action="/submit">
        <div class="dropdown-container">
            <div class="dropdown">
                <label for="drop_fam" class="dropdown-label">PRODUCT FAM:</label>
                <select id = "drop_fam" class="dropbtn" name="dropdown fam" id="">
                </select>
            </div>
            
            <div class="dropdown">
                <label for="drop_date" class="dropdown-label">DATE:</label>
                <select id="drop_date" class="dropbtn" name="dropdown store">
                    <!-- JavaScript will populate options here -->
                </select>
            </div>

            <div class="dropdown">
                <label for="drop_store" class="dropdown-label">STORE:</label>
                <select id = "drop_store" class="dropbtn" name="dropdown date">
                </select>
            </div>
        </div>
    </form>
    <br>

    <button type="submit" class="btn btn-futuristic" id="submit-dropdown-button">GENERATE RESULTS</button>

</div>

<div style="align-items:center; text-align: center;">
    <img src="" alt="Click generate results to display predictions" id = "pred_img" width = "1400">
</div>

<script>
    document.getElementById('submit-dropdown-button').addEventListener('click', function () {
        fam = document.getElementById('drop_fam').value;
        date = document.getElementById('drop_date').value;
        store = document.getElementById('drop_store').value;
        console.log(`/${store}/${fam}/${date}/plot.png`)
        document.getElementById("pred_img").src = `/${store}/${fam}/${date}/plot.png`
    });

    var dropdownOptions = document.querySelectorAll('.dropdown-content a');

    dropdownOptions.forEach(function(option) {
        option.addEventListener('click', function() {
            dropdownOptions.forEach(function(opt) {
                opt.classList.remove('clicked');
            });
            this.classList.add('clicked');

            // Actualizar el texto del botón del dropdown con la selección
            var dropdownButton = this.closest('.dropdown').querySelector('.dropbtn');
            dropdownButton.textContent = this.textContent;
        });
    });

    const fam_list=['AUTOMOTIVE', 'BABY CARE', 'BEAUTY', 'BEVERAGES', 'BOOKS',
    'BREAD AND BAKERY', 'CELEBRATION', 'CLEANING', 'DAIRY', 'DELI', 'EGGS',
    'FROZEN FOODS', 'GROCERY I', 'GROCERY II', 'HARDWARE',
    'HOME AND KITCHEN I', 'HOME AND KITCHEN II', 'HOME APPLIANCES',
    'HOME CARE', 'LADIESWEAR', 'LAWN AND GARDEN', 'LINGERIE',
    'LIQUOR,WINE,BEER', 'MAGAZINES', 'MEATS', 'PERSONAL CARE',
    'PET SUPPLIES', 'PLAYERS AND ELECTRONICS', 'POULTRY',
    'PREPARED FOODS', 'PRODUCE', 'SCHOOL AND OFFICE SUPPLIES',
    'SEAFOOD']

    const store_list=[1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54]
    const date_list=['2015','2016','2017']

    //Generate dropdaown balues
    const drop_fam = document.getElementById("drop_fam");
    // Populate the dropdown with options
    fam_list.forEach(option => {
        const optionElement = document.createElement("option");
        optionElement.text = option;
        drop_fam.appendChild(optionElement);
    });

    const drop_store = document.getElementById("drop_store");
    store_list.forEach(option => {
        const optionElement = document.createElement("option");
        optionElement.text = option.toString();
        drop_store.appendChild(optionElement);
    });

    const drop_date = document.getElementById("drop_date");
    date_list.forEach(option => {
        const optionElement = document.createElement("option");
        optionElement.text = option;
        drop_date.appendChild(optionElement);
    });

</script>
</body>
</html>
